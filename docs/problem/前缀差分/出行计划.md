# 出行计划

??? question "[问题描述](https://www.acwing.com/problem/content/description/4458/)"

    最近提瓦特大陆出入各个场所需要限定时间内的阴性证明；

    例如，如果你的核酸是在 `t` 时刻做的，出结果的时间需要时间 `k`, 即 `t + k` 时刻就可以出核酸结构；

    每个场所都有特定的核酸有效期限，比如对于场所 `i` 来说，进入该场所需要在 `ti` 时刻进入，核酸有效期限为 `ci`，那么如果你的核酸检测在该场所的有效时间段为 `t + k <= ti <= t + k + ci - 1` 才能进入该场所；

    小派蒙想要进入这 `n` 个场所里面买吃的，她会询问你 `m` 次，并且规定了提瓦特做核酸需要时间 `k` 才能出结果，每一次询问她都会问你一个整数时刻 `q`，她说如果我在时刻 `q` 开始做核酸，我能进入上面多少个场所买吃的呢？

    **输入格式**

    第一行输入 $3$ 个整数分别代表 `n、m、k` 场所的个数、询问的次数、核酸出结果耗时；

    接下来的 `n` 行，每行两个整数 `ti、ci` 分别代表各个场所的入场时间段、核酸有效期限；

    接下来的 `m` 行，每行一个整数 `q` 分别代表做核酸的时间段；

    **输出格式**

    输出 `m` 行，每行一个整数代表可进入的场所个数；

    **输入样例**

    ```
    6 2 10
    5 24
    10 24
    11 24
    34 24
    35 24
    35 48
    1
    2
    ```

    **输出样例**

    ```
    3
    3
    ```

## 前缀差分

转换为区间重叠问题，每进入一个区间 `+1`, 每出去一个区间 `-1`；

推导区间的起点与终点：`t + k <= ti <= t + k + ci - 1` 得到：

> `[ti - k - ci + 1, ti - k]`

??? success "代码参考"

    ```c++
    const LL N = (LL)(1e6 + 10);
    const LL M = (LL)(3e5 + 10);

    LL n, m, k;
    LL a[N], b[N], s[N];

    void solve(void)
    {
        cin >> n >> m >> k;
        for (LL i = 1; i <= n; i ++)
        {
            LL t1, t2; cin >> t1 >> t2;
            a[t1 - t2 - k + 1 + M] ++, b[t1 - k + M] ++;
        }
        s[0] = a[0] - b[0];
        for (LL i = 1; i <= 2 * M; i ++)
        {
            s[i] = s[i - 1] + a[i] - b[i];
        }
        for (LL i = 1; i <= 2 * M; i ++)
        {
            s[i] += b[i];
        }
        for (LL i = 1; i <= m; i ++)
        {
            LL t1; cin >> t1; cout << s[t1 + M] << endl;
        }
    }
    ```