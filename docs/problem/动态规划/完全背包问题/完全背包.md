# 完全背包

??? question "[问题描述](https://www.luogu.com.cn/problem/P1616)"

    背包容量为 $m$，物品种类有 $n$ 种.

    对于每一种物品，其数量有无穷多个，且其体积都是 $v_i$，价值都是 $w_i$

    问背包的最大价值是多少？

    **数据范围**

    $1 \leq m \leq 10 ^ 7$

    $1 \leq n \leq 10 ^ 4$

    $1 \leq n * m \leq 10 ^ 7$

    $1 \leq v_i, w_i \leq 10 ^ 4$

    **输入输出**

    【输入格式】

    第一行输入两个整数 $m$ 和 $n$

    接下来的 $n$ 行，每行两个整数，分别代表 $v_i$ 和 $w_i$

    **样例一**

    输入：

    ```
    70 3
    71 100
    69 1
    1 2
    ```

    输出：

    ```
    140
    ```

## 完全背包

令 $dp[i][j]$ 表示只选择前 $i$ 种物品放入容量为 $j$ 的背包时的最大价值，

则 $dp[i][j]$ 面临的问题是第 $i$ 种物品到达是拿还是不拿？如果拿应该拿多少个？

在 *01 背包问题* 中，对于背包容量是从右边往左边遍历，这样做的目的是保证当前物品只选取一件！如果我放松管制，不用保证当前物品只选取一件，这样就成了 *完全背包问题* 的解法：

??? success "代码参考"

    ```c++
    LL n, m, v[N], w[N];
    LL dp[N];

    void solve(void)
    {
        m = gll(), n = gll();
        for (LL i = 1; i <= n; i ++)
            v[i] = gll(), w[i] = gll();

        for (LL i = 1; i <= n; i ++)
        {
            for (LL j = 1; j <= m; j ++)
            {
                if (j - v[i] >= 0) 
                    dp[j] = max(dp[j], dp[j - v[i]] + w[i]);
            }
        }

        pll(dp[m]);
    }
    ```