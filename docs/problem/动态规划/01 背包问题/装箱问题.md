# 装箱问题

??? question "[问题描述](https://www.luogu.com.cn/problem/P1049)"

    # [NOIP2001 普及组] 装箱问题

    ## 题目描述

    有一个箱子容量为 $V$，同时有 $n$ 个物品，每个物品有一个体积。


    现在从 $n$ 个物品中，任取若干个装入箱内（也可以不取），使箱子的剩余空间最小。输出这个最小值。

    ## 输入格式

    第一行共一个整数 $V$，表示箱子容量。

    第二行共一个整数 $n$，表示物品总数。

    接下来 $n$ 行，每行有一个正整数，表示第 $i$ 个物品的体积。

    ## 输出格式

    - 共一行一个整数，表示箱子最小剩余空间。

    ## 样例 #1

    ### 样例输入 #1

    ```
    24
    6
    8
    3
    12
    7
    9
    7
    ```

    ### 样例输出 #1

    ```
    0
    ```

    ## 提示

    对于 $100\%$ 数据，满足 $0<n \le 30$，$1 \le V \le 20000$。

    **【题目来源】**

    NOIP 2001 普及组第四题

## 动态规划

如果背包容量限定为 $j$ 那么第 $i$ 件物品到底是装还是不装？

如果不装时，那么剩余容量的最优值就是将前 $i-1$ 件物品装入容量为 $j$ 的背包中的最优值，即 $dp[i - 1][j]$

如果装上了第 $i$ 件物品，那么剩余容量的最优值就是将前 $i-1$ 件物品装入容量为 $j-v[i]$ 背包中的最优值，即 $dp[i - 1][j - v[i]]$

> 最优公式：$dp[i][j] = min(dp[i-1][j], dp[i-1][j-v[i]])$

??? success "代码参考"

    ```c++
    LL m, n, v[N];
    LL dp[40][20010];
    void solve(void)
    {
        m = gll(), n = gll();
        for (LL i = 1; i <= n; i ++) v[i] = gll();

        for (LL i = 0; i <= m; i ++) dp[0][i] = i;

        for (LL i = 1; i <= n; i ++)
        {
            for (LL j = 1; j <= m; j ++)
            {
                dp[i][j] = dp[i - 1][j];
                if (j - v[i] >= 0) dp[i][j] = min(dp[i][j], dp[i - 1][j - v[i]]);
            }
        }

        pll(dp[n][m]);
    }
    ```

因为当前状态只与前面状态有关，二维转一维

??? success "一维数组代替二维"

    ```c++
    LL m, n, v[N];
    LL dp[20100];
    void solve(void)
    {
        m = gll(), n = gll();
        for (LL i = 1; i <= n; i ++) v[i] = gll();

        for (LL i = 0; i <= m; i ++) dp[i] = i;

        for (LL i = 1; i <= n; i ++)
        {
            for (LL j = m; j >= 1; j --)
            {
                if (j - v[i] >= 0) dp[j] = min(dp[j], dp[j - v[i]]);
                else break;
            }
        }

        pll(dp[m]);
    }
    ```