# 01 背包问题

??? question "[问题描述](https://www.luogu.com.cn/problem/P1048)"

    小花需要在限定时间 $t$ 之内采取尽可能多价值的草药，

    总共有 $n$ 株草药，

    但是每一株草药都有对应的采药花费时间 $v_i$ 与价值 $w_i$，

    请你求出小花在限定时间 $t$ 之内所能采取的草药最高价值总和是多少？

    **数据范围**

    $1 \leq t \leq 1000$

    $1 \leq n \leq 100$

    $1 \leq v_i , w_i \leq 100$

    **输入输出**

    【输入格式】

    第一行输入两个整数分别代表 $t$ 和 $n$

    接下来的 $n$ 行，每行两个整数分别代表 $v_i$ 和 $w_i$.

    【输出格式】

    输出一行，代表在规定时间内所能获得的最高价值总和.

    **样例一**

    输入：

    ```
    70 3
    71 100
    69 1
    1 2
    ```

    输出：

    ```
    3
    ```

## 01 背包问题

如果用暴力你会怎么做？

无非就是不断枚举当前草药拿了之后的最优值与该草药不拿的最优值，比较哪个更优就选哪个.

就这样暴力枚举，总共就有 $2 ^ n$ 个分支，代表所有拿与不拿的组合情况.

用记忆化递归枚举所有可能很容易实现：

??? success "记忆化递归"

    ```c++
    LL t, n, v[N], w[N];
    LL dp[1010][1010], st[1010][1010];

    LL dfs(LL id, LL sp)
    {
        if (id > n) return 0;
        if (st[id][sp]) return dp[id][sp];
        st[id][sp] = 1;
        LL res = dfs(id + 1, sp);
        if (sp + v[id] <= t) res = max(res, dfs(id + 1, sp + v[id]) + w[id]);
        return dp[id][sp] = res;
    }

    void solve(void)
    {
        t = gll(), n = gll();
        for (LL i = 1; i <= n; i ++)
            v[i] = gll(), w[i] = gll();

        cout << dfs(0, 0) << endl;
    }
    ```

如果用循环如何实现呢？

定义编号为 $i$ 的草药的选取状态为 $x_i$ 且 $x_i = 0$ 时代表当前草药没有被选上，$x_i = 1$ 代表当前草药被选上，那么答案可以表示成：

- 约束条件：$\sum_{i = 1}^{n}v_ix_i \leq t, x_i = \{0, 1\}$
- 目标函数：$\max(\sum_{i = 1}^{n}w_ix_i)$