# 区间修改与查询

??? question "[问题描述](https://www.luogu.com.cn/problem/P3372)"

    已知一个数列，你需要进行下面两种操作:

    1. 将某区间上的数都加上 $k$
    2. 求出某区间的和

    数列长度为 $n$，操作次数是 $m$

    **数据大小**

    $1 \leq n, m \leq 10 ^ 5$

    $\sum \|as[i]\| \leq 10 ^ 18$

    **输入输出**

    【输入格式】

    第一行输入两个整数 $n$ 和 $m$

    第二行输入 $n$ 个整数代表数列 $as[n]$

    接下来的 $m$ 行，每行一个询问，其中：

    - `1 l r k` 将区间 $[l, r]$ 上的所有数都加上 $k$
    - `2 l r` 输出区间 $[l, r]$ 的和
 
    **样例一**

    输入：

    ```
    5 5
    1 5 4 2 3
    2 2 4
    1 2 3 2
    2 3 4
    1 1 5 1
    2 1 4
    ```

    输出：

    ```
    11
    8
    20
    ```

## 线段树 + 懒惰-标记

