# 剩下的数

??? question "[问题描述](https://ac.nowcoder.com/acm/contest/47266/B)"

    给定一个区间 $[l, r]$，将该区间首位相接看成一个环.

    有 $n$ 次询问，对于每一次询问都会给定一个数 $0 \leq x \leq r - l + 1$.

    每次询问你都可以对环进行任意次操作，每次操作都可以将环上连续部分删掉，并将剩下部分的数按顺序重新拼接成一个环. 要求删掉的连续部分的和必须为 $x$ 的倍数才能删掉.

    问该环最少应该剩下多少个数？

    **数据范围**

    $0 < l < r < 10 ^ 9$

    $1 \leq n \leq 10 ^ 5$

    $0 \leq x \leq r - l + 1$

    **输入输出**

    【输入格式】

    第一行输入一个整数 $t$ 代表测试样例的数量.

    对于每一个测试样例：

    - 第一行都有两个整数分别代表 $l$ 和 $r$
    - 第二行只有一个整数代表 $n$
    - 接下来的 $n$ 行，每行都有一次询问，每次询问都输入一个整数 $x$

    【输出格式】

    对于每一个测试样例都输出 $n$ 行，代表每次询问的结果.

    **样例一**

    输入：

    ```
    1
    1 5
    2
    2
    3
    ```

    输出：

    ```
    1
    0
    ```

## 找规律、特征

因为区间 $[l, r]$ 的数量不低于 $x$ 个，所以若对该区间取模 $x$ 得到新的区间 $Q$ 时，区间 $Q$ 的元素种类一定都包含 $0 \sim x - 1$.

先对区间 $[l, r]$ 求和，求出结果为 $sum$，

若 $sum \bmod x = 0$ 说明该环的和是 $x$ 的倍数，可以整个环都删掉最后只剩 $0$ 个元素;

若 $sum \bmod x = k$ 首先明确 $k < x$ 且 $k$ 一定存在于区间 $Q$ 中，可以说 $[l, r]$ 上必有一个数 $y$ 使得 $y \bmod x = k$ 一定成立！若我们将 $y$ 从环中提取出来，对剩下的数求和的结果：$sum_2 = (sum - y) \bmod x = sum \bmod x - y \bmod x = sum \bmod x - k = k - k = 0$，说明排除 $y$ 后剩下的数求和是 $x$ 的倍数且在环上连续，可以直接删掉，最后只剩下一个数 $y$.

??? success "代码参考"

    ```c++
    LL t, n, l, r, x, sum;

    void solve(void)
    {
        t = gll();
        while (t --)
        {
            l = gll(), r = gll();
            n = gll();
            while (n --)
            {
                x = gll(); sum = (l + r) * (r - l + 1) / 2;
                if (sum % x) pll(1);
                else pll(0);
            }
        }
    }
    ```