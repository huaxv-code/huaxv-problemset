# 入门命令

## select 语句

```sql
source run.sql; -- 执行 run.sql 脚本


system cls; -- 清屏


show databases; -- 展示所有数据库


show tables; -- 展示所有表


/*
create table student 
    (name varchar(20), age int, id varchar(50));
*/

describe student; -- 查看表的结构


select id, name from student; 
    -- 按照 id、name 的顺序在 student 表中查询


select * from student; 
    -- 检索所有的列 （注意是：列）


select distinct age 
    from student; 
    -- 检索所有种类的年龄，使用 distinct 语句去除重复数据


select distinct age 
    from student 
    limit 5; 
    -- 先检索所有年龄段，然后只返回前 5 行数据


select distinct age 
    from student 
    limit 5, 10;
    -- 从第 5 行开始，只获取前 10 行数据
    -- 注意，mysql 是从第 0 行开始数的


select distinct age 
    from student 
    order by age;
    -- 查询所有的年龄段，并升序排列


select age, name 
    from student 
    order by age, name 
    limit 100;
    -- 先按照年龄排序，然后相同年龄就按照名字排序，且只获取前 100 行


select age, name 
    from student 
    order by age desc, name 
    limit 100;
    -- 先按照年龄降序排，如果年龄相同，就按照名字升序排，只获取前 100 行


select id, name 
    from student
    where id >= "17"
    order by id
    limit 100;
    -- 在 student 表中查找 id 大于等于 17 的学生信息
    -- 查询结果需要按照学号 id 排序，只获取前 100 行数据


select id, name 
    from student
    where name is not null
    limit 100;
    -- 在 student 表中查找 id 和 name，
    -- 且 name 不能是空的情况下才能查询成功
    -- 只选择前 100 行


select id 
    from student
    where name is null
    limit 100;
    -- 在 student 表内查询没有名字的学号 id


select id, name, age 
    from student 
    where age between 17 and 20;
    -- 在 student 表内查询年龄在 17 到 10 之内的学生信息
    -- between ... and ... 范围限定查询


select id, name, age 
    from student
    where age >= 17 and age <= 20;
    -- 在 student 表内查询年龄在 17 到 10 之内的学生信息
    -- 和 between ... and ... 语句的功能一样


select id, name, age 
    from student
    where name like "林%" or name like "黄%";
    -- 在 student 表中查找姓 林、黄 的学生


select id, name, age
    from student 
    where age in (16, 18, 20, 22)
    order by age, id, name;
    -- 查询年龄是 16 或者是 18、20、22 的学生基本信息
    -- 如果用 not in 就是查找年龄不是 16、18、20、22 的学生信息


select concat("id = ", id, " name = ", name, " age = ", age)
    from student
    order by id
    limit 100;
    -- concat 字符串拼接


select concat(age, " ", name) as age_name
    from student
    order by age_name
    limit 100;
    -- 给 concat 拼接的字符串起别名 age_name 方便后面引用


select name, price_now - price_before as sub_price
    from store
    order by sub_price, name
    limit 100;
    -- 使用算术运算 +、-、*、/


select avg(price_now) as now_avg
    from store;
    -- 查询 price_now 的平均值


select avg(price_now) as now_avg
    from store
    where id between "2023000001" and "2023000100";
    -- 查询编号在 2023000001 ~ 2023000100 范围内的价格平均值


select min(price_now) as mi
    from store;
    -- 查询最低的价格


select max(price_now) as mx
    from store;
    -- 查询最高的价格


select sum(price_now) as sm
    from store;
    -- 对价格求和


select count(distinct age) 
    from student;
    -- 统计不同年龄段的个数


select age, count(age)
    from student
    group by age
    order by age;
    -- 按照 age 分组，并统计每一组的个数
    -- 显示要按照 age 排序


select age, count(age)
    from student
    group by age
    having age >= 20
    order by age;
    -- 按照年龄分组，按照每一组求出组的个数
    -- 并过滤掉年龄小于 20 的组

/*
create table student 
    (id varchar(50), name varchar(20), age int);

create table student_score
    (name varchar(20), subject varchar(20), score int);
*/

select name, score 
    from student_score
    where name in (
        select name from student
    )
    limit 100;
    -- 查找名字在 student 表中的学生的成绩


select id, student.name, subject, score
    from student, student_score
    where student.name = student_score.name
    order by id, subject
    limit 100;
    -- 一个学生的信息分开到两个表装
    -- 在 student 表中获取学生的学号信息
    -- 在 student_score 表中获取学生的分数信息
    -- 多表联结查询
    -- 时间复杂度很高，笛卡尔积


select name, subject, score 
    from student_score
    where name in (
        select name 
            from class_1
    )
    order by score;
    -- 查找班级一的学生的分数信息


select class_1.name, subject, score
    from student_score, class_1
    where class_1.name = student_score.name
    order by score;
    -- 和上面语句的效果一致

-- 无论是何种联结，都必须有至少一个列出现在不同的表中

select * from class_1
    union
select * from class_2;

-- 将班级 1 的学生信息与班级 2 的学生信息合并在一起

-- --------------------------
-- 请描述一下下面语句的不同点：

select * from class_1
    union
select * from class_1;


select * from class_1
    union all
select * from class_1;
-- ---------------------------

select c1.id, c1.name
    from class_1 as c1
    order by c1.id;
    -- 用别名来查找


select c1.id, c2.name
    from (
        select * from class_1
    ) as c1, (
        select * from class_1
    ) as c2
    where c1.id = c2.id
    order by c1.id;
    -- 复杂点的查询语句，效果和上面一样
    -- 仅供思维启蒙


select c1.id, c1.name, c2.ct
    from (
        select * from class_1
    ) as c1, (
        select id, count(id) as ct from class_1
            group by id
    ) as c2
    where c1.id = c2.id
    order by c1.id;
    -- 仅供思维启蒙


select * from (
    select * from class_1
        union
    select * from class_1
) as t;
    -- 仅供思维启蒙


select * from (
    select * from class_1
        union
    select * from class_1
) t;
    -- 仅供思维启蒙


select distinct c1.id, c1.name, c2.ct
    from (
        select * from class_1
            union all
        select * from class_1
    ) as c1, (
            select id, count(id) as ct from (
                select * from class_1
                    union all
                select * from class_1
            ) as t 
            group by id
    ) as c2
    where c1.id = c2.id;
    -- 仅供思维启蒙

-- -------------------------------

select * from class_1 as c1
    union
select * from class_2 as c2
order by id, name;
    -- 合并 c1 和 c2 的查找结果
    -- 并且按照 id、name 排序
    -- order by 语句只能出现一次
    -- union 要求查询的结果都必须包含相同名称的列
```

## insert 语句

```sql
insert into class_3 (
    id, name, age
)   values (
    0, "aidol", 16
);  
    -- 将单条数据插入 class_3 中


insert into class_3 
    (id, name, age)
values 
    (1, "anami", 17),
    (2, "burami", 18),
    (3, "talgr", 19);
    -- 同时插入多条语句


insert into c1_score
    (id, name, subject, score)
select c1.id, c1.name, c2.subject, c2.score
    from 
    class_1 as c1, 
    student_score as c2
    where c1.name = c2.name
    order by c1.id, c2.subject;
    -- insert into 与 select 语句联合使用
    -- 从 student_score 表中拿出成绩放入新表中


```